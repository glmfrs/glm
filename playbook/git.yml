---
- name: git installation
  yum:
    name: git
    state: latest
    update_cache: yes

- name: git user
  user:
    name: git
    home: /opt/git/
    shell: /usr/bin/git-shell
    expires: -1

- name: git clef ssh
  authorized_key:
    user: git
    state: present
    key: ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIG6VOB6xka5bO3c87sNYtpWIRpswcD+ZPog8iSweokiM

- name: git repertoires
  file:
    path: /opt/git/test.git
    state: directory
    owner: git

- name: git init
  command: '/usr/bin/git init --bare /opt/git/test.git'
  become_user: git